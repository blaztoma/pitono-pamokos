<h2>Failo eilučių skaitymas</h2>
<p>Praeitame pavyzdyje mes panaudojome failo objekto funkciją <code>read()</code> tam, kad nuskaityti visą turinį. Visgi, dažnai pasitaikantis atvejis yra kai reikia skaityti failo turinį po eilutę. Tai nesudėtinga, nes turime tam skirtą failo objekto funkciją <code>readlines()</code>. Pamėginkime nuskaityti vaikystės eilėraštuką po vieną eiluę!</p>
<iframe id="ifr_5795" class="pyframe" title="failai 1" src="https://arzinai.lt/scormv2/public/659979b665c7a" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>
<p>Kaip veikia pirmoji eilutė - jau aptarėme. <code>for eilute in failas.readlines():</code> yra ciklas, kuris iteruoja per kiekvieną eilutę failo turinyje, nes <code>failas.readlines()</code> skaito visas failo eilutes ir grąžina jas kaip sąrašą, kurio kiekvienas elementas yra viena eilutė. Na ir <code>print(eilute, end="")</code> atspausdina kintamajam <code>eilute</code> priskirtą tuo metu skaitomą eilutę be eilutės nukėlimo ženklo (<code>end=""</code>).</p>
<p>Tiesa, kartais iteruoti per visas eilutes nereikės, nes bus nemažai uždavinių, kuriuose reikės nuskaityti 1 - 3 eilutes. Tuo atveju užteks kintamajam priskirti nuskaitomą eilutę.</p>
<iframe id="ifr_7373" class="pyframe" title="failai 1" src="https://arzinai.lt/scormv2/public/6599862b66dd8" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>
<p>Beje, turbūt pastebite, kad <code>readline()</code> funkcijos gale panaudota dar viena funkcija - <code>strip()</code>. Ji mums pašalina eilutės gale esantį eilutės perkėlimo simbolį, kuris dažniausiai yra nereikalingas. Daugeliu atvejų - ir jums sprendžiant uždavinius taip reikės daryti.</p>
<p>Panagrinėkime dažną atvejį, kai vienoje eilutėje yra keli duomenys. Pradėkime nuo paprasčiausio varianto, kai mums reikia nuskaityti vardą ir pavardę pateiktus vienoje failo vardas.txt eilutėje.</p>
<iframe id="ifr_5044" class="pyframe" title="failo eilutės" src="https://arzinai.lt/scormv2/public/65cdaac55bb2a" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>
<p>Šis atvejis paprastesnis, nes reikėjo nuskaityti eilutes ir jų nereikėjo konvertuoti į kitus tipus. Siūlome naudoti antrąjį variantą siekiant apsidrausti nuo nenumatytų atvejų, kai gale pasitaiko tuščių tarpų ar kitų simbolių. Aukščiau esančiame kode funkcija <code>readline()</code> nuskaitė eilutę. Tuomet funkcija <code>strip()</code> apkirpo eilutę iš kraštų. Galiausiai funkcija <code>split()</code> perskėlė eilutę į dvi dalis. Pirmoji dalis buvo priskirta <code>vardas</code> kintamajam, antroji - <code>pavarde</code>. Eilutė skaldymas vykdomas pagal tarpo simbolį. Norint perskelti pagal kitą simbolį (pavyzdžiui, kablelį), reikia tą simbolį pateikti skliausteliuose (<code>strip(",")</code>).</p>
<p>Dabar panagrinėkime atvejį, kai reikia nuskaityti skaičius. Tai yra kiek sudėtingiau, nes nuskaitytą eilutę reikia ne tik perskelti, bet ir paversti į skaičiaus tipo (dažniausiai <code>int</code> arba <code>float</code> kintamuosius. Panagrinėkite kelis pavyzdžius, kaip tai padaryti. Užduotis - nuskaityti dieną ir tą dieną buvusią temperatūrą.</p>
<iframe id="ifr_1384" class="pyframe" title="failo eilutės" src="https://arzinai.lt/scormv2/public/65cdae4b0e675" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>
<p>Kaip matote, eilutę nuskaitėme taip kaip tai darėme ankstesniame pavyzdyje. Po to nuskaitytus duomenis (kintamieji <code>skaicius_1</code> ir <code>skaicius_2</code>) pavertėme į <code>int</code> tipo kintamuosius. Kita vertus, gali kilti klausimas - ar negalima kaip nors trumpiau užrašyti šitas operacijas? Taip - galima! Tam mums reikia susipažinti su funkcija <code>map</code>.</p>
<iframe id="ifr_3323" class="pyframe" title="failo eilutės" src="https://arzinai.lt/scormv2/public/65cdaf95c9335" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>
<p>Ta keista funkcija <code>map</code> turi du parametrus. Antrajame parametre yra duomenys, kuriuos reikia apdoroti, o pirmajame - funkcija, kurią reikia pritaikyti apdorojant kiekvieną elementą. Pamėginkime perskaityti 3 eilutę žmonių kalba:</p>
<blockquote>Kiekvienam perskaitytos, apkirptos ir suskaldytos eilutės elementui pritaikyti funkciją <code>int</code>.</blockquote>
<p>Kai tai padarysime visi apdoroti kintamieji, šiuo atveju, bus <code>int</code> tipo. Beje, daug įdomių dalykų galima padaryti trumpiau naudojant <code>map</code> funkciją, bet apie tai kitą kartą.</p>
<p>Dabar panagrinėkime dar sudėtingesnį atvejį, kai mes nežinome kiek eilutėje yra elementų. Sakykime, šį kartą failo temperatura.txt pirmoje eilutėje yra tik temperatūrų skaičių eilutė. Nuskaitymas beveik nesiskirs. Skirsis tik kintamasis, kuriam priskiriamas rezultatas. Jis bus - sąrašo tipo. Taip panaudosime funkciją <code>list</code>, kad gatą rezultatą iš funkcijos <code>map</code> paverstų į sąrašą. Medžiaga apie sąrašus pateikta tolesnėse pamokose. Pasimokę sugrįžkite čia - gal šie kodai turės didesnę prasmę.</p>
<iframe id="ifr_4972" class="pyframe" title="failo eilutės" src="https://arzinai.lt/scormv2/public/65cdb23ca457e" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>
<p>O kas, jeigu duomenų failą organizuotume kitaip. Eilutės pirmoje pozicijoje būtų dienos pavadinimas, o po to eitų temperatūrų sąrašas (pvz. kurią dienos valandą buvo kokia temperatūra). Duomenų pavyzdį pažiūrėkite faile <em>temperatura.txt</em>. Šiuo atveju galime pasinaudoti žvagžute (<code>*</code>) tam kad atskirai nuskaitytume dieną ir temperatūrų sąrašą. Beje, temperatūrų sąrašas irgi bus eilutę, kurią reikės pasiversti į sveikuosius skaičius.</p>
<iframe id="ifr_4560" class="pyframe" title="failo eilutės" src="https://arzinai.lt/scormv2/public/65cdb54b46f07" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>
<p>Kodą jau truputį aptarėme. Trečioje eilutėje nuskaitome iš failo eilutę. Pirmąjį elementą priskiriam kintamajam <code>diena</code>. Visus likusius - kintamajam <code>temperaturu_elementai</code>. Ketvirtoji eilutė paverčia <code>temperaturu_elementai</code> eilutes į skaičių sąrašą.</p>
<p>Nuo tų variantų turbūt jau susisuko galva :) Bet panagrinėkime dar vieną variantą, kai pradžioje failo duotas mėnesio pavadinimas, o toliau eina dienų ir jų temperatūrų sąrašas. Toliau esantis kodas įtraukia dar vieną struktūrą - žodyną. Jūs apie šią struktūrą mokysitės dar vėliau, tačiau pateikiam šį pavyzdį norėdami parodyti įvairius skaitymo iš failo variantus. Jei šiuo momentu sunkiau suprasti - sugrįžkite čia, kai susipažinsite su sąrašais ir žodynais.</p>
<iframe id="ifr_2273" class="pyframe" title="failo eilutės" src="https://arzinai.lt/scormv2/public/65cdba206d91a" width="100%" height="1000" frameborder="0" allow="fullscreen"></iframe>
<script>window.addEventListener('message', function (event) { if (event.data.type === 'resizeHeight') { const iframe = Array.from(document.querySelectorAll('iframe.pyframe')).find((frame) => frame.contentWindow === event.source); if (iframe) { iframe.height = event.data.newHeight; } } });</script>